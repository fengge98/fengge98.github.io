<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="FengGe">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="FengGe">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FengGe">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>

  <title> FengGe </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">FengGe</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/loadrunner问题记录/" itemprop="url">
                loadrunner问题记录
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-10T13:54:01+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/性能测试/" itemprop="url" rel="index">
                  <span itemprop="name">性能测试</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/loadrunner问题记录/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/loadrunner问题记录/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="简介">简介</h2><pre><code><span class="variable">HTML</span>-<span class="variable">Based</span>是在web测试脚本录制过程中默认选项.它基于界面，将属于一个界面的所有请求放在一个一个<span class="variable">Web</span>-url中.
<span class="variable">URL</span>-<span class="variable">Based</span>在web测试脚本的录制过程，将每一个http请求放在一个<span class="variable">Web</span>-url中可读性较差.
</code></pre><h2 id="HTML-Base&amp;URL-Based二者对比">HTML-Base&amp;URL-Based二者对比</h2><table>
<thead>
<tr>
<th style="text-align:center">编号</th>
<th><code>HTML_Based</code></th>
<th><code>URL_Based</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">阅读性</td>
<td>HTML为用户的每一个动作产生单独的步骤，脚本录制结果简洁直接，可阅读性强</td>
<td>将每一个url请求放入web-url中，能更好的控制业务过程</td>
</tr>
<tr>
<td style="text-align:center">选择</td>
<td>基于浏览器的应用选择此项</td>
<td>不是基于浏览器的应用/基于浏览器的应用中的脚本语言/javascript Applets向服务器发出了请求/使用了https协议</td>
</tr>
</tbody>
</table>
<p>注：录制过程不要使用浏览器的后退功能loadrunner对其支持不是很好.</p>
<h2 id="LoadRunner录制脚本时为什么不弹出IE浏览器?">LoadRunner录制脚本时为什么不弹出IE浏览器?</h2><p>A.当一台主机上安装多个浏览器时，LoadRunner录制脚本经常遇到不能打开浏览器的情况，可以用下面的方法来解决.<br>启动浏览器，打开Internet选项对话框，切换到高级标签，去掉“启用第三方浏览器扩展(需要重启动)”的勾选，然后再次运行VuGen即可解决问题<br>提示：通常安装Firefox等浏览器后，都会勾选上面得选项，导致不能正常录制.因此建议运行LoadRunner得主机上保持一个干净的测试环境.<br>B.点Vuser》Run-Time Setting》Brower》Brower Version》Change==修改IE版本和WIN 7</p>
<h2 id="录制Web脚本时，生成的脚本中存在乱码该如何解决?">录制Web脚本时，生成的脚本中存在乱码该如何解决?</h2><p>　　录制脚本前，打开录制选项配置对话框Record-Options，进入到Advanced标签，先勾选“Support charset”，然后选择中支持UTF-8.在IIS中找到Web.Config文件，在<system.web>….</system.web>节加入<globalization requestencoding="gb2312" responseencoding="gb2312" fileencoding="gb2312">后再次录制，就不会出现中文乱码问题了.</globalization></p>
<h2 id="HTML-based_script与URL-based_script的脚本有什么区别?">HTML-based script与URL-based script的脚本有什么区别?</h2><p>使用“HTML-based script”的模式录制脚本，VuGen为用户的每个HTML操作生成单独的步骤，这种脚本看上去比较直观;使用“URL-based script”模式录制脚本时，VuGen可以捕获所有作为用户操作结果而发送到服务器的HTTP请求，然后为用户的每个请求分别生成对应方法.<br>通常，基于浏览器的Web应用会使用“HTML-based script”模式来录制脚本;而没有基于浏览器的Web应用Web应用中包含了与服务器进行交互的Java Applet基于浏览器的应用中包含了向服务器进行通信的JavaScript/VBScript代码基于浏览器的应用中使用了HTTPS安全协议，这时使用“URL-based script”模式进行录制.</p>
<h2 id="为什么脚本中添加了检查方法Web-find，但是脚本回放时却没有执行?">为什么脚本中添加了检查方法Web-find，但是脚本回放时却没有执行?</h2><p>由于检查点功能会耗费一定的资源，因此LoadRunner默认关闭了对文本及图像的检查.要想开启检查功能，必须修改运行时的配置Run-time Setting.<br>进入“Run-time Setting”对话框，依次进入“Internet Protocol→Preferences”，勾选Checks下的“Enable Image and text check”选项即可.<br>检查执行结果时推荐使用web_reg_find方法.</p>
<h2 id="运行时的Pacing设置主要影响什么?">运行时的Pacing设置主要影响什么?</h2><p>Pacing主要用来设置重复迭代脚本的间隔时间.共有三种方法：上次迭代结束后立刻开始上次迭代结束后等待固定时间按固定或随机的时间间隔开始执行新的迭代.<br>根据实际需要设置迭代即可.通常，没有时间间隔会产生更大的压力.</p>
<h2 id="运行时设置Log标签中，如果没有勾选“Enable_logging”，则手工消息可以发送吗?">运行时设置Log标签中，如果没有勾选“Enable logging”，则手工消息可以发送吗?</h2><p>Enable logging选项仅影响自动日志记录和通过lr_log_message发送的消息.即使没有勾选，虚拟用户脚本中如果使用lr_messagelr_output_messagelr_error_message,仍然会记录其发出的消息.</p>
<h2 id="LoadRunner_8-0版本的VuGen在录制Web_Services协议的脚本时一切正常，而回放时报出错误提示“Error：server_returned_an_incorrectly_formatted_SOAP_response”-这时说明原因引起的?">LoadRunner 8.0版本的VuGen在录制Web Services协议的脚本时一切正常，而回放时报出错误提示“Error：server returned an incorrectly formatted SOAP response”.这时说明原因引起的?</h2><p>造成这种情况的主要原因是LoadRunner 8.0的VuGen在录制Web Service协议的脚本时存在一个缺陷：如果服务器的操作系统是中文的，VuGen会自动将WSDL文件的头改为，因此会有上面的错误提示.<br>解决方法：把“LR80WebservicesFPI_setup.exe”和“lrunner_web_sevices_path_1.exe”两个补丁打上即可解决.</p>
<h2 id="VuGen支持Netscape的客户证书吗?">VuGen支持Netscape的客户证书吗?</h2><p>不支持.目前的VuGen 8.0版本中仅支持Internet Explorer的客户端证书.录制脚本时可以先从Netscape中导出所需的证书，然后将其导入到Internet Explorer中，并确保以相同的顺序导出和导入这些证书.而且，在每台将要录制或运行需要证书的Web Vuser脚本的计算机上都要重复执行前面的过程.</p>
<h2 id="VuGen会修改录制浏览器中的代理服务器设置吗?">VuGen会修改录制浏览器中的代理服务器设置吗?</h2><p>会修改.在开始录制基于浏览器的Web Vuser脚本时，VuGen首先会启动指定的浏览器.然后，VuGen会指示浏览器访问VuGen代理服务器.为此，VuGen会修改录制浏览器上的代理服务器设置.默认情况下，VuGen会立即将代理服务器设置更改为Localhost:7777.录制之后，VuGen会将原始代理服务器设置还原到该录制浏览器中.因此，在VuGen进行录制的过程中，不可以更改代理服务器设置，否则将无法正常进行.</p>
<h2 id="在LoadRunner脚本如何输出当前系统时间?">在LoadRunner脚本如何输出当前系统时间?</h2><p>LoadRunner提供了char <em>ctime(const time_t </em>time)函数，调用参数为一个Long型的整数指针，用于存放返回时间的数值表示.<br>调用语句与返回值如下示例：<br>　　<br>    typedef long time_t;<br>　　Action()<br>　　{<br>　　time_t t;<br>　　lr_message(“Time in seconds since 1/1/70: %ld\n”,time(&amp;t));<br>　　lr_message(“System time and date: %s”,ctime(&amp;t));<br>　　}<br>　　输出结果为：<br>　　Time in seconds since 1/1/70: 1185329968<br>　　System time and date:Wed Jul 25 10:19:28 2007<br>　　<br>一些Web虚拟用户脚本录制后立刻回放没有任何问题，但是当设置迭代次数大于1时，如果进行回放则只能成功迭代一次.</p>
<h2 id="为什么从第二次迭代开始发生错误?">为什么从第二次迭代开始发生错误?</h2><p>这种现象多是由于在“Run-time Setting”的“Browse Emulation”的设置中，勾选了“Simulate a new user on each iteration”及其下面的选项“Clear cache on each iteration”这两个选项的含义是每次迭代时模拟一个新的用户及每次迭代时清除缓存.<br>由于脚本迭代时，init和end只能执行一次，如果每次迭代都模拟一个新的用户并清除缓存，则用户登录信息将一并清除，因此迭代时可能会发生错误.</p>
<h2 id="虚拟客户脚本“Run-time_Setting”中的线程和进程运行方式的区别?">虚拟客户脚本“Run-time Setting”中的线程和进程运行方式的区别?</h2><p>如果选择“Run Vuser as a process”，则场景运行时会为每一个虚拟用户创建一个进程;选择“Run Vuser as a thread”则将每个虚拟用户作为一个线程来运行，在任务管理器中只看到一个mmdrv.exe，这种方式的运行效率更高，能造成更大的压力，时默认选项.<br>另外，如果启用了IP欺骗功能，则先在Controller中选中Tools菜单下的“Expert Mode”，然后将Tools菜单下的“Options&gt;General”标签页中的IP地址分配方式也设置为与Vuser运行方式一致，同为线程或进程方式.</p>
<h2 id="在Controller中运行Web相关测试场景时，经常会有很多超时错误提示，如何处理这类问题?">在Controller中运行Web相关测试场景时，经常会有很多超时错误提示，如何处理这类问题?</h2><p>这主要有脚本的默认超时设置引起.当回放Web脚本时，有时候由于服务器响应时间较长，会产生超时的错误.这时需要修改脚本的运行时配置.<br>进入“Run-time Setting”对话框后，依次进入“Internet Protocol→Preference”.然后点击“Options…”按钮，进入高级设置对话框，可以修改各类超时设置的默认值.</p>
<h2 id="为什么Windows系统中的CPU内存等资源仍然充足，但是模拟的用户数量却上不去?">为什么Windows系统中的CPU内存等资源仍然充足，但是模拟的用户数量却上不去?</h2><p>在Windows计算机的标准设置下，操作系统的默认限制只能使用几百个Vuser，这个限制与CPU或内存无关，主要是操作系统本身规定了默认的最大线程数所导致.要想突破Windows这个限制，须修改Windows注册表.以Windows XP Professional为例.<br>　　<br>    (1)打开注册表后，进入注册表项HKEY_LOCAL_MACHINE中的下列关键字：System\CurrentControlSet\Control\Session Manager\SubSystems.<br>　　(2)找到Windows关键字，Windows关键字如下所示：<br>　　%SystemRoot%\system32\csrss.exe bjectDirectory=\Windows<br>　　SharedSection=1024,3072,512 Windows=On SubSystemType=Windows ServerDll=basesrv,1<br>　　ServerDll=winsrv:UserServerDllInitialization,3 ServerDll=winsrv:ConServerDllInitialization,2<br>　　ProfileControl=Off MaxRequestThreads=16<br>　　SharedSection=1024,3072,512关键字的格式为xxxx,yyyy,zzz.其中，xxxx定义了系统范围堆的最大值(以KB为单位)    ，yyyy定义每个桌面堆得大小.<br>    (3)将yyyy的设置从3072更改为8192(即8MB)，增加SharedSection参数值.<br>　　<br>通过对注册表的更改，系统将允许运行更多的线程，因而可以在计算机上运行更多的Vuser.这意味着能够模拟的最大并发用户数量将不受Windows操作系统的限制，而只受硬件和内部可伸缩性限制的约束.</p>
<h2 id="录制脚本为空">录制脚本为空</h2><p>1.LR录制是客户端与服务器的数据交互，只有在有交互的时候才可以录制到脚本.<br>1）交互方式不一样，通过客户端的server进行交互，在scrīpt中选择最后一个track processes created as COM local servers  [选择scrīpt里的最后一个选项].</p>
<ol>
<li>非客户端与服务器的交互的一种操作，在页面上点前进或后退，如果页面是从缓存中取出来的，那么也就没有和服务器数据交互，所以也录制的为空脚本.   [windows注册表中禁用缓存]. </li>
<li>协议选择错误，b/s不一定走http协议，还可能是https（http+ssl）.[最基础的错误].录制出错.<br>2）选择internet里选项里的连接里的局域网设置的代理不能选，因为LR在录制的时候会动态选择.<br>3）网页里的恶意代码，检测的时候响应LR录制脚本[用工具检测恶意代码，然后卸载恶意代码，eg：Ad_Aweare].<br>4）防病毒软件和防火墙，在录制时暂时关闭.<br>5）因为LR自身原因报错或者有些脚本不能录制下来[录制是最好选用scrīpt view，此时会报错，但能写下脚本，是因为LR无法解析，可以手工修改，而tree view 就直接停止了.<br>　<br>Loadrunner不支持默认的浏览器</li>
</ol>
<hr>
<p>有时候，我们上网的时候，不小心会将某个浏览器设置为默认的浏览器，而我们不知道，这个时候，我们用loadrunner进行录制的时候，会提示loadrunner不支持系统设置的默认的浏览器，因此，需要我们重新选择浏览器，我们可以利用Reconding optiom中的Browser选项设置支持的浏览器，我们还可以利用下面的方法，将IE设置为默认的浏览器，因为loadrunner是支持IE的.设置方法如下：<br>在IE“工具（T）”菜单→“Interner选项”→“程序”选项卡里，确保“检查Internet Explorer是否为默认的浏览器”选项打上√.然后在你启动IE时，如果IE非默认浏览器就会出现提示窗是否把IE设置为默认.</p>
<h2 id="Step_download_timeout_(120_seconds)">Step download timeout (120 seconds)   </h2><p>这是一个经常会遇到的问题，解决得办法走以下步骤：<br>1修改run time setting中的请求超时时间，增加到600s,其中有三项的参数可以一次都修改了，HTTP-request connect timeout，HTTP-request receieve timeout，Step download timeout，分别建议修改为6006005000.run time setting设置完了后记住还需要在control组件的option的run time setting中设置相应的参数.<br>2办法一不能解决的情况下，解决办法如下：<br>设置runt time setting中的internet protocol-preferences中的advaced区域有一个winlnet replay instead of sockets选项，选项后再回放就成功了.切记此法只对windows系统起作用，此法来自zee的资料.    </p>
<h2 id="问题描述Connection_reset_by_peer-">问题描述Connection reset by peer.   </h2><p>这个问题不多遇见，一般是由于下载的速度慢，导致超时，所以，需要调整一下超时时间.<br>解决办法：Run-time setting窗口中的‘Internet Protocol’－‘Preferences’设置set advanced options（设置高级选项），重新设置一下“HTTP-request connect timeout（sec），可以稍微设大一些”.    </p>
<h2 id="问题描述connection_refused">问题描述connection refused  </h2><p>这个的错误的原因比较复杂，也可能很简单也可能需要查看好几个地方，解决起来不同的操作系统方式也不同.<br>1首先检查是不是连接weblogic服务过大部分被拒绝，需要监控weblogic的连接等待情况，此时需要增加acceptBacklog，每次增加25%来提高看是否解决，同时还需要增加连接池和调整执行线程数，（连接池数*Statement Cache Size）的值应该小于等于oracle数据库连接数最大值.<br>2如果方法一操作后没有变化，此时需要去查看服务器操作系统中是否对连接数做了限制，AIX下可以直接vi文件limits修改其中的连接限制数端口数，还有tcp连接等待时间间隔大小，wiodows类似，只不过windows修改注册表，具体修改注册表中有TcpTimedWaitDelay和MaxUserPort项，键值在[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters].因为负载生成器的性能太好，发数据包特别快，服务器也响应特别快，从而导致负载生成器的机器的端口在没有timeout之前就全部占满了.在全部占满后，就会出现上面的错误.执行netstat –na命令，可以看到打开了很多端口.所以就调整TCP的time out.即在最后一个端口还没有用到时，前面已经有端口在释放了.<br>1,这里的TcpTimedWaitDelay默认值应该中是30s，所以这里，把这个值调小为5s（按需要调整）.<br>2,也可以把MaxUserPort调大（如果这个值不是最大值的话）.    </p>
<h2 id="问题描述open_many_files">问题描述open many files </h2><p>问题一般都在压力较大的时候出现，由于服务器或者应用中间件本身对于打开的文件数有最大值限制造成，解决办法：<br>1修改操作系统的文件数限制，aix下面修改limits下的nofiles限制条件，增大或者设置为没有限制，尽量对涉及到的服务器都作修改.<br>2方法一解决不了情况下再去查看应用服务器weblogic的commonEnv.sh文件，修改其中的nofiles文件max-nofiles数增大，应该就可以通过了，具体就是查找到nofiles方法，修改其中else条件的执行体，把文件打开数调大.修改前记住备份此文件，防止修改出错.<br>3linux上可以通过ulimit –HSn 4096来修改文件打开数限制，也可以通过ulimit -a 来查看.<br>4linux上可以通过lsof -p pid | wc -l 来查看进程打开的句柄数.    </p>
<h2 id="问题描述has_shut_down_the_connection_prematurely">问题描述has shut down the connection prematurely  </h2><p>一般是在访问应用服务器时出现，大用户量和小用户量均会出现.<br>来自网上的解释：<br>1&gt;应用访问死掉<br>小用户时：程序上的问题.程序上存在数据库的问题<br>2&gt;应用服务没有死<br>应用服务参数设置问题<br>例如：<br>在许多客户端连接Weblogic应用服务器被拒绝，而在服务器端没有错误显示，则有可能是Weblogic中的server元素的AcceptBacklog属性值设得过低.如果连接时收到connection refused消息，说明应提高该值，每次增加25％<br>Java连接池的大小设置，或JVM的设置等<br>3&gt;数据库的连接<br>在应用服务的性能参数可能太小了<br>数据库启动的最大连接数（跟硬件的内存有关）<br>以上信息有一定的参考价值，实际情况可以参考此类调试.<br>如果是以上所说的小用户时：程序上的问题.程序上存在数据库的问题，那就必须采用更加专业的工具来抓取出现问题的程序，主要是程序中执行效率很低的sql语句，weblogic可以采用introscope定位，期间可以注意观察一下jvm的垃圾回收情况看是否正常，我在实践中并发500用户和600用户时曾出现过jvm锯齿型的变化，上升下降都很快，这应该是不太正常的.<br>实际测试中，可以用telent 站点看看是否可以连接进去，可以通过修改连接池中的连接数和适当增加应用内存值，问题可以解决.    </p>
<h2 id="问题描述Failed_to_connect_to_server">问题描述Failed to connect to server   </h2><p>这个问题一般是客户端链接到服务失败，原因有两个客户端连接限制（也就是压力负载机器），一个网络延迟严重，解决办法：<br>1修改负载机器注册表中的TcpTimedWaitDelay减小延时和MaxUserPort增加端口数.注：这将增加机器的负荷.<br>2检查网络延迟情况，看问题出在什么环节.<br>  建议为了减少这种情况，办法一最好测试前就完成了，保证干净的网络环境，每个负载机器的压力测试用户数不易过大，尽量平均每台负载器的用户数，这样以上问题出现的概率就很小了.   </p>
<h2 id="问题描述Overlapped_transmission_of_request_to_…_WSA_IO_PENDING">问题描述Overlapped transmission of request to … WSA_IO_PENDING   </h2><p>这个问题，解决方法：<br> 1方法一，在脚本前加入web_set_sockets_option(“OVERLAPPED_SEND”, “0”)，禁用TTFB细分，问题即可解决，但是TTFB细分图将不能再使用，附图.<br>2方法二，可以通过增加连接池和应用系统的内存，每次增加25%.   </p>
<h2 id="问题描述Deleted_the_current_transaction_…_since_response_time_is_not_accurate">问题描述Deleted the current transaction … since response time is not accurate </h2><p>这个问题不多遇见，一般出现在压力机器上发生ping值为负数（AMD双核CPU），可以重新启动pc机或者打补丁，附图.   </p>
<h2 id="问题描述HTTP_Status-Code=500_(Internal_Server_Error)_for">问题描述HTTP Status-Code=500 (Internal Server Error) for  </h2><p>1应用服务当掉，重新启动应用服务.<br>2当应用系统处于的可用内存处于阀值以下时，出现HTTP Status-Code=500的概率非常高，此时只要增加应用系统的内存，问题即可解决.    </p>
<h2 id="问题描述Failed_to_transmit_data_to_network:_[10057]Socket_is_not_connected">问题描述Failed to transmit data to network: [10057]Socket is not connected</h2><p>这个错误是由网络原因造成的，PC1和PC2上面都装了相同的loadrunner 9.0，且以相同数量的虚拟用户数运行相同的业务（机器上的其他条件都相同），PC1上面有少部分用户报错，PC2上的用户全部执行通过.   </p>
<h2 id="问题描述_Error_-27257:_Pending_web_reg_save_param/reg_find/create_html_param[_ex]_request(s)_detected_and_reset_at_the_end_of_iteration_number_1">问题描述 Error -27257: Pending web_reg_save_param/reg_find/create_html_param[_ex] request(s) detected and reset at the end of iteration number 1  </h2><p>解决方法：web_reg_save_param位置放错了，应该放到请求页面前面. </p>
<h2 id="问题描述_通过Controler调用远程代理时报错，Error:_CCI_security_error:You_are_running_under_secure_mode_and_the_function_system_is_not_allowed_in_this_mode-">问题描述 通过Controler调用远程代理时报错，Error: CCI security error:You are running under secure mode and the function system is not allowed in this mode.  </h2><p>解决方法：在代理开启的时候，去掉勾选防火墙选项.   </p>
<h2 id="LoadRunner超时错误：">LoadRunner超时错误：</h2><p>在录制Web协议脚本回放时超时情况经常出现，产生错误的原因也有很多，解决的方法也不同.<br>错误现象1：Action.c(16): Error -27728: Step download timeout (120 seconds) has expired when downloading non-resource(s).<br>错误分析：对于HTTP协议，默认的超时时间是120秒（可以在LoadRunner中修改），客户端发送一个请求到服务器端，如果超过120秒服务器端还没有返回结果，则出现超时错误.<br>解决办法：首先在运行环境中对超时进行设置，默认的超时时间可以设置长一些，再设置多次迭代运行，如果还有超时现象，需要在“Runtime Setting”&gt;“Internet Protocol：Preferences”&gt;“Advanced”区域中设置一个“winlnet replay instead of sockets”选项，再回放是否成功.<br>错误现象2：Action.c(81):Continuing after Error -27498: Timed out while processing URL=<a href="http://172.18.20.70:7001/workflow/bjtel/leasedline/" target="_blank" rel="external">http://172.18.20.70:7001/workflow/bjtel/leasedline/</a> querystat/ subOrderQuery.do<br>错误分析：这种错误常常是因为并发压力过大，服务器端太繁忙，无法及时响应客户端的请求而造成的，所以这个错误是正常现象，是压力过大造成的.<br>如果压力很小就出现这个问题，可能是脚本某个地方有错误，要仔细查看脚本，提示的错误信息会定位某个具体问题发生的位置.<br>解决办法：例如上面的错误现象问题定位在某个URL上，需要再次运行一下场景，同时在其他机器上访问此URL.如果不能访问或时间过长，可能是服务器或者此应用不能支撑如此之大的负载.分析一下服务器，最好对其性能进行优化.<br>如果再次运行场景后还有超时现象，就要在各种图形中分析一下原因，例如可以查看是否服务器DNS网络等方面存在问题.<br>最后，增加一下运行时的超时设置，在“Run-Time Settings”&gt;“Internet Protocol:Preferences”中，单击“options”，增加“HTTP-request connect timeout”或者“HTTP-request receive”的值.   </p>
<h2 id="LoadRunner脚本中出现乱码：在录制Web协议脚本时出现中文乱码，在回放脚本时会使回放停止在乱码位置，脚本无法运行-">LoadRunner脚本中出现乱码：在录制Web协议脚本时出现中文乱码，在回放脚本时会使回放停止在乱码位置，脚本无法运行.   </h2><p>错误现象：某个链接或者图片名称为中文乱码，脚本运行无法通过.<br>错误分析：脚本录制可能采用的是URL-based script方式，如果程序定义的字符集合采用的是国际标准，脚本就会出现乱码现象.<br>解决办法：重新录制脚本，在录制脚本前，打开录制选项配置对话框进行设置，在“Recording Options”的“Advanced”选项里先将“Surport Charset”选中，然后选中支持“UTF-8”的选项.   </p>
<h2 id="LoadRunner">LoadRunner</h2><p> HTTP服务器状态代码：在录制Web协议脚本回放脚本的过程中，会出现HTTP服务器状态代码，例如常见的页面-404错误提示-500错误提示.<br>错误现象1：-404 Not Found服务器没有找到与请求URI相符的资源，但还可以继续运行直到结束.<br>错误分析：此处与请求URI相符的资源在录制脚本时已经被提交过一次，回放时不可再重复提交同样的资源，而需要更改提交资源的内容，每次回放一次脚本都要改变提交的数据，保证模拟实际环境，造成一定的负载压力.<br>解决办法：在出现错误的位置进行脚本关联，在必要时插入相应的函数.<br>错误现象2：-500 Internal Server Error服务器内部错误，脚本运行停止.<br>错误分析：服务器碰到了意外情况，使其无法继续回应请求.<br>解决办法：出现此错误是致命的，说明问题很严重，需要从问题的出现位置进行检查，此时需要此程序的开发人员配合来解决，而且产生的原因根据实际情况来定，测试人员无法单独解决问题，而且应该尽快解决，以便于后面的测试.   </p>
<p>LoadRunner请求无法找到：在录制Web协议脚本回放脚本的过程中，会出现请求无法找到的现象，而导致脚本运行停止.</p>
<hr>
<p>错误现象：Action.c(41): Error -27979: Requested form. not found [MsgId: MERR-27979]<br> Action.c(41): web_submit_form. highest severity level was “ERROR”,0 body bytes, 0 header bytes [MsgId: MMSG-27178]”<br>这时在tree view中看不到此组件的相关URL.<br>错误分析：所选择的录制脚本模式不正确，通常情况下，基于浏览器的Web应用会使用“HTML-based script”模式来录制脚本；而没有基于浏览器的Web应用Web应用中包含了与服务器进行交互的Java Applet基于浏览器的应用中包含了向服务器进行通信的JavaScript/VBScript代码基于浏览器的应用中使用HTTPS安全协议，这时则使用“URL-based script”模式进行录制.<br>解决办法：打开录制选项配置对话框进行设置，在“Recording Options”的“Internet Protocol”选项里的“Recording”中选择“Recording Level”为“HTML-based script”，单击“HTML Advanced”，选择“Script. Type”为“A script. containing explicit”.然后再选择使用“URL-based script”模式来录制脚本.   </p>
<h2 id="LoadRunner不执行检查方法：在录制Web协议脚本中添加了检查方法Web_find，但是在脚本回放的过程中并没有执行-">LoadRunner不执行检查方法：在录制Web协议脚本中添加了检查方法Web_find，但是在脚本回放的过程中并没有执行.   </h2><p>错误现象：在脚本中插入函数Web_find，在脚本中设置文本以及图像的检查点，但是在回放过程中并没有对设置的检查点进行检查，即Web_find失效.<br>错误分析：由于检查功能会消耗一定的资源，因此LoadRunner默认关闭了对文本以及图像的检查，所以在设置检查点后，需要开启检查功能.<br>解决办法：打开运行环境设置对话框进行设置，在“Run-time Settings”的“Internet Protocol”选项里的“Perference”中勾选“Check”下的“Enable Image and text check”选项.   </p>
<h2 id="LoadRunner回放Web_Services协议脚本错误：">LoadRunner回放Web Services协议脚本错误：</h2><p>LoadRunner 8.0版本在录制Web Services协议的脚本时正常，但在回放时会出现错误，提示停止脚本运行.<br>错误现象：利用LoadRunner 8.0版本来录制Web Services协议的脚本没有任何错误提示，回放脚本时会出现如下错误提示“Error：server returned an incorrectly formatted SOAP response”.<br>错误分析：出现此错误的原因是LoadRunner8.0在录制Web Services协议的脚本时存在一个缺陷：如果服务器的操作系统是中文的，VuGen会自动将WSDL文件的头改为</p>
<pre><code><span class="pi">&lt;?xml version=”1.0″encoding=”zh_cn” ?&gt;</span>，所以才会有此错误提示.   
</code></pre><p>解决办法：下载两个补丁，分别为“LR80WebServicesFPI_setup.exe”和“lrunner<em>web</em> services_patch_1.exe”安装上即可. </p>
<h2 id="error:missing_newline_in_d:\loadrunner\name-dat">error:missing newline in d:\loadrunner\name.dat   </h2><p>场景执行时报error:missing newline in d:\loadrunner\name.dat<br>第二次执行不报<br>两个解决办法：<br>第一：如果参数不是很多的话，不要打开记事本去编辑参数，就直接在LR提供的参数的表格中进行编辑即可.<br>第二：如果参数很多超过100条的话.在记事本中编辑好了之后，记着在最后一个参数后打个回车，让鼠标的光标移动到下一行.  </p>
<h2 id="load_generator_is_currently_running_the_maximum_number_of_vuser_of_this_type">load generator is currently running the maximum number of vuser of this type   </h2><p>使用的是loadrunner8.0，有10000个用户的web的license，global的有10个.<br>在测试的时候发现running vuser到达1000以后就不能再提高，后面的vuser就会出错.错误是“The load generator is currently running the maximum number of vuser of this type”.<br>已经可以排除是load generator机器本身资源的问题.因为换了性能比较强的酷睿2还是同样的问题，CPU和memory都有空闲.<br>解决办法:   </p>
<pre><code>在<span class="built_in">load</span> generator中有一个V<span class="keyword">user</span> limits tab，可以设置running <span class="keyword">user</span>的最大数目. 即设置 <span class="built_in">load</span> generator----Details------V<span class="keyword">user</span> limits ----Other Vusers 的最大参数   
</code></pre><h2 id="sofeware_caused_connction：">sofeware caused connction：</h2><p>这种情况，一般是脚本有问题，或者loadrunner有问题.解决方法：重新启动机器，或者重新录制脚本，估计是loadrunner的bug.   </p>
<h2 id="cannot_connect_to_server:">cannot connect to server:</h2><p>无法连接到服务器.这种情况是服务器的配置有问题，服务器无法承受过多的并发连接了.需要优化服务器的配置，<br>如操作系统采用windows 2003 server，<br>优化tomcat配置：maxThreads=”500” minSpareThreads=”400” maxSpareThreads=”450”.但是tomcat 最多支持500个并发访问<br>优化apache配置：<br>ThreadsPerChild 1900<br>MaxRequestsPerChild 10000<br>其他的错误如：<br>Action.c(10): Error -27791: Server has shut down the connection prematurely<br>HTTP Status-Code=503 (Service Temporarily Unavailable)<br>一般都是由于服务器配置不够好引起的，按照问题（2）处理，如果仍旧不行，需要优化硬件和调整程序了.   </p>
<h2 id="Controller中设置了用户并发数量，但是运行时为何初始化的用户数量少于实际数量？">Controller中设置了用户并发数量，但是运行时为何初始化的用户数量少于实际数量？</h2><p>主要时设置问题.在Tools→options→Run-time setting中可以设置每次最多初始化的虚拟用户.如果需要100个并发用户，则将该值设置为大于100的数值.另外，注意LoadRunner相关协议License的更新，确保使用的License能够允许所需要的并发用户数量.</p>
<h2 id="如何让场景的用户执行发生错误继续运行，以保证不间断进行压力测试？">如何让场景的用户执行发生错误继续运行，以保证不间断进行压力测试？</h2><p>用VuGen打开虚拟用户脚本后，进入”Run-time Settings”对话框后，依次进入”General→Miscellaneous”，可以看到Miscellaneous设置中关于”Error Handling”的配置.勾选”Continue on error”即可让虚拟用户发生错误继续运行.</p>
<h2 id="为什么-NET虚拟用户有时不能在远程主机执行？">为什么.NET虚拟用户有时不能在远程主机执行？</h2><p>主要时LoadRunner的版本问题.根据笔者的经验，如果是Microsoft Visual Studio 2005开发的虚拟用户，同时LoadRunner客户端的版本低于8.1，执行Controller的主机将会发生错误.<br>因此要想正确的运行Microsoft Visual Studio 2005开发的.NET虚拟用户，客户端最好装8.1以上的版本，Controller的主机则安装8.0和8.1两个版本均可.此外，产生压力的 LoadRunner客户端上预先应该安装.NET运行环境，如果Microsoft Visual Studio 2005开发的是.NET虚拟用户，则应该安装Microsoft .NET Framework SDK v2.0.</p>
<h2 id="测试分析结果中会统计Action时间，而实际上可能并不须要这些数据，如何只显示自己定义的用户事务？">测试分析结果中会统计Action时间，而实际上可能并不须要这些数据，如何只显示自己定义的用户事务？</h2><p>进入脚本的运行时设置，依次进入General→Miscellaneous.默认情况下，自动事务配置”Automatic Transactions”下有两个选项：第一个是把脚本的Action部分定义为一个事务；第二个时把脚本的每一部分定义为一个事务.去掉这两个勾选后，测试结果将会只显示自己定义的用户事务.</p>
<h2 id="测试结果中，Summary和平均事务响应时间图里的各个事务的最大值平均值最小值为什么显示不一样？">测试结果中，Summary和平均事务响应时间图里的各个事务的最大值平均值最小值为什么显示不一样？</h2><p>主要是受采样时间的影响.Summary里的事务平均响应时间是根据整个场景执行过程得到的数据计算所得，最大值与最小值也是从整个场景中得到的.平均事务响应时间图主要时按照LoadRunner分析出来的采样频率来获取事务响应时间的最大值与最小值，然后计算平均值.可以通过”Set Granularity”来修改平均事务响应时间图的采样频率.如果把”Granularity”设为场景执行时间，则统计结果将会一致.</p>
<h2 id="统计结果中的总点击量Total_Hits时用户的鼠标点击次数吗？">统计结果中的总点击量Total Hits时用户的鼠标点击次数吗？</h2><p>Total Hits不时按照用户的鼠标点击次数来计算的，而是按照各个虚拟客户端向后台发起的总的请求数来进行统计的.例如在向服务器请求的一个页面中，如果该页面包含5个图片，用户只要单击鼠标就可以访问该页面，而单个虚拟用户在LoadRunner访问的点击量为1+5=6次.</p>
<h2 id="有些Web测试结果分析图（例如每秒返回页面数）在测试结果分析图中无法看到，如何进行配置？">有些Web测试结果分析图（例如每秒返回页面数）在测试结果分析图中无法看到，如何进行配置？</h2><p>用VuGen打开虚拟用户脚本后，进入”Run-time Settings”对话框后，依次进入”Internet Protocol&gt;Preference”，可以看到一些Web性能图配置.<br>勾选上面得选项后，Controller将会在测试执行过程中生成数据，然后可在Analysis中查看相应的性能结果分析图.</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/ubuntu下python-django环境搭建/" itemprop="url">
                ubuntu下python+django环境搭建
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-10T13:09:36+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/ubuntu下python-django环境搭建/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/ubuntu下python-django环境搭建/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="一，首先列出需要安装的东西：">一，首先列出需要安装的东西：</h2><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>python2.7</td>
<td>这个安装就不用多说了linux都会自带的</td>
</tr>
<tr>
<td>easy_install</td>
<td>一个能安装python工具的命令</td>
<td><code>sudo apt-get install python-setuptools</code></td>
</tr>
<tr>
<td>pip</td>
<td>python包管理工具</td>
<td><code>sudo easy install pip</code></td>
</tr>
<tr>
<td>git</td>
<td>版本管理工具实现多人合作开发</td>
<td><code>sudo apt-get install git</code></td>
</tr>
<tr>
<td>django</td>
<td>项目开发框架（建议先不要安装在全局）</td>
<td><code>sudo easy install django</code></td>
</tr>
<tr>
<td>virtualenv</td>
<td>提供一个用于开发的模拟环境</td>
<td><code>sudo easy installvirtualenv</code></td>
</tr>
<tr>
<td>sublime</td>
<td>编辑器                                     </td>
</tr>
</tbody>
</table>
<pre><code>到这里需要安装的东西就没有啦~
</code></pre><h2 id="二，使用virtualenv建立虚拟开发环境"> 二，使用virtualenv建立虚拟开发环境</h2><p>转到开发目录（cd filename / 打开filename  cd ..  /后退   mkdir filename/ 创建名为filename的文件）用到的3基本个命令<br>执行命令：virtualenvenv                   #创建名为env的环境<br>执行命令：source env/bin/activate   #进入env环境    这时命令行前面会有（env）这个标志<br>执行命令：pipfreeze                          #查看当前env目录下安装包的情况 正常情况下是什么都没有 或是默认安装几个重要包<br>执行命令：pip install django                #安装djangodjango框架安装在env环境中<br>再次执行：pip freeze                          #会发现多了一个django</p>
<h2 id="三，使用django创建一个工程">三，使用django创建一个工程</h2><p>执行命令：django-admin.py startproject mysite #创建一个名为mysite的django工程<br>进入mysite目录：cd mysite<br>执行命令：python manage.py runserver<br>在浏览器地址栏输入：<a href="http://127.0.0.1:8000/" target="_blank" rel="external">http://127.0.0.1:8000/</a>      #会发现它已经在工作了</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/SqlMap命令-全/" itemprop="url">
                SqlMap命令-全
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-10T11:29:18+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/安全测试工具/" itemprop="url" rel="index">
                  <span itemprop="name">安全测试工具</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/SqlMap命令-全/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/SqlMap命令-全/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="Options（选项）">Options（选项）</h2><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--version</code></td>
<td>显示程序的版本号并退出</td>
</tr>
<tr>
<td><code>-h, --help</code></td>
<td>显示此帮助消息并退出</td>
</tr>
<tr>
<td><code>-v VERBOSE</code></td>
<td>详细级别：0-6（默认为1）</td>
</tr>
</tbody>
</table>
<h2 id="Target（目标）">Target（目标）</h2><pre><code>以下至少需要设置其中一个选项，设置目标<span class="built_in">URL</span>。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d DIRECT</code></td>
<td>直接连接到数据库。</td>
</tr>
<tr>
<td><code>-u URL, --url=URL</code></td>
<td>目标URL。</td>
</tr>
<tr>
<td><code>-l LIST</code></td>
<td>从Burp或WebScarab代理的日志中解析目标。</td>
</tr>
<tr>
<td><code>-r REQUESTFILE</code></td>
<td>从一个文件中载入HTTP请求。</td>
</tr>
<tr>
<td><code>-g GOOGLEDORK</code></td>
<td>处理Google dork的结果作为目标URL。</td>
</tr>
<tr>
<td><code>-c CONFIGFILE</code></td>
<td>从INI配置文件中加载选项。</td>
</tr>
</tbody>
</table>
<h2 id="Request（请求）">Request（请求）</h2><pre><code>这些选项可以用来指定如何连接到目标<span class="built_in">URL</span>。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--data=DATA</code></td>
<td>通过POST发送的数据字符串</td>
</tr>
<tr>
<td><code>--cookie=COOKIE</code></td>
<td>HTTP Cookie头</td>
</tr>
<tr>
<td><code>--cookie-urlencode</code></td>
<td>URL 编码生成的cookie注入</td>
</tr>
<tr>
<td><code>--drop-set-cookie</code></td>
<td>忽略响应的Set - Cookie头信息</td>
</tr>
<tr>
<td><code>--user-agent=AGENT</code></td>
<td>指定  HTTP User - Agent头</td>
</tr>
<tr>
<td><code>--random-agent</code></td>
<td>使用随机选定的HTTP User - Agent头</td>
</tr>
<tr>
<td><code>--referer=REFERER</code></td>
<td>指定  HTTP Referer头</td>
</tr>
<tr>
<td><code>--headers=HEADERS</code></td>
<td>换行分开，加入其他的HTTP头</td>
</tr>
<tr>
<td><code>--auth-type=ATYPE</code></td>
<td>HTTP身份验证类型（基本，摘要或NTLM）(Basic, Digest or NTLM)</td>
</tr>
<tr>
<td><code>--auth-cred=ACRED</code></td>
<td>HTTP身份验证凭据（用户名:密码） </td>
</tr>
<tr>
<td><code>--auth-cert=ACERT</code></td>
<td>HTTP认证证书（key_file，cert_file）</td>
</tr>
<tr>
<td><code>--proxy=PROXY</code></td>
<td>使用HTTP代理连接到目标URL  <code>--proxy http://127.0.0.1:8888</code></td>
</tr>
<tr>
<td><code>--proxy-cred=PCRED</code></td>
<td>HTTP代理身份验证凭据（用户名：密码）</td>
</tr>
<tr>
<td><code>--ignore-proxy</code></td>
<td>忽略系统默认的HTTP代理</td>
</tr>
<tr>
<td><code>--delay=DELAY</code></td>
<td>在每个HTTP请求之间的延迟时间，单位为秒  <code>--delay 0.5</code></td>
</tr>
<tr>
<td><code>--timeout=TIMEOUT</code></td>
<td>等待连接超时的时间（默认为30秒）</td>
</tr>
<tr>
<td><code>--retries=RETRIES</code></td>
<td>连接超时后重新连接的时间（默认3）</td>
</tr>
<tr>
<td><code>--scope=SCOPE</code></td>
<td>从所提供的代理日志中过滤器目标的正则表达式</td>
</tr>
<tr>
<td><code>--safe-url=SAFURL</code></td>
<td>在测试过程中经常访问的url地址</td>
</tr>
<tr>
<td><code>--safe-freq=SAFREQ</code></td>
<td>两次访问之间测试请求，给出安全的URL</td>
</tr>
</tbody>
</table>
<h2 id="Optimization（优化）">Optimization（优化）</h2><pre><code>这些选项可用于优化SqlMap的性能。
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-o</code></td>
<td>开启所有优化开关</td>
</tr>
<tr>
<td><code>--predict-output</code></td>
<td>预测常见的查询输出</td>
</tr>
<tr>
<td><code>--keep-alive</code></td>
<td>使用持久的HTTP（S）连接</td>
</tr>
<tr>
<td><code>--null-connection</code></td>
<td>从没有实际的HTTP响应体中检索页面长度</td>
</tr>
<tr>
<td><code>--threads=THREADS</code></td>
<td>最大的HTTP（S）请求并发量（默认为1）</td>
</tr>
</tbody>
</table>
<h2 id="Injection（注入）">Injection（注入）</h2><pre><code>这些选项可以用来指定测试哪些参数，  提供自定义的注入payloads和可选篡改脚本。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-p TESTPARAMETER</code></td>
<td>可测试的参数（S）</td>
</tr>
<tr>
<td><code>--dbms=DBMS</code></td>
<td>强制后端的DBMS为此值 如：–dbms “Mysql”</td>
</tr>
<tr>
<td><code>--os=OS</code></td>
<td>强制后端的DBMS操作系统为这个值</td>
</tr>
<tr>
<td><code>--prefix=PREFIX</code></td>
<td>注入payload字符串前缀</td>
</tr>
<tr>
<td><code>--suffix=SUFFIX</code></td>
<td>注入payload字符串后缀</td>
</tr>
<tr>
<td><code>--tamper=TAMPER</code></td>
<td>使用给定的脚本（S）篡改注入数据</td>
</tr>
</tbody>
</table>
<h2 id="Detection（检测）">Detection（检测）</h2><pre><code>这些选项可以用来指定在SQL盲注时如何解析和比较HTTP响应页面的内容。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--level=LEVEL</code></td>
<td>执行测试的等级（1-5，默认为1）</td>
</tr>
<tr>
<td><code>--risk=RISK</code></td>
<td>执行测试的风险（0-3，默认为1）</td>
</tr>
<tr>
<td><code>--string=STRING</code></td>
<td>查询时有效时在页面匹配字符串</td>
</tr>
<tr>
<td><code>--regexp=REGEXP</code></td>
<td>查询时有效时在页面匹配正则表达式</td>
</tr>
<tr>
<td><code>--text-only</code></td>
<td>仅基于在文本内容比较网页</td>
</tr>
</tbody>
</table>
<p>  Techniques（技巧）： </p>
<pre><code>这些选项可用于调整具体的SQL注入测试。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--technique=TECH</code></td>
<td>SQL注入技术测试（默认BEUST）</td>
</tr>
<tr>
<td><code>--time-sec=TIMESEC</code></td>
<td>DBMS响应的延迟时间（默认为5秒）</td>
</tr>
<tr>
<td><code>--union-cols=UCOLS</code></td>
<td>定列范围用于测试UNION查询注入</td>
</tr>
<tr>
<td><code>--union-char=UCHAR</code></td>
<td>用于暴力猜解列数的字符</td>
</tr>
</tbody>
</table>
<h2 id="Fingerprint（指纹）">Fingerprint（指纹）</h2><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-f, --fingerprint</code></td>
<td>执行检查广泛的DBMS版本指纹</td>
</tr>
</tbody>
</table>
<h2 id="Enumeration（枚举）">Enumeration（枚举）</h2><pre><code>这些选项可以用来列举后端数据库管理系统的信息、表中的结构和数据。此外，您还可以运行您自己的SQL语句。
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-b, --banner</code></td>
<td>检索数据库管理系统的标识</td>
</tr>
<tr>
<td><code>--current-user</code></td>
<td>检索数据库管理系统当前用户</td>
</tr>
<tr>
<td><code>--current-db</code></td>
<td>检索数据库管理系统当前数据库</td>
</tr>
<tr>
<td><code>--is-dba</code></td>
<td>检测DBMS当前用户是否DBA</td>
</tr>
<tr>
<td><code>--users</code></td>
<td>枚举数据库管理系统用户 </td>
</tr>
<tr>
<td><code>--passwords</code></td>
<td>枚举数据库管理系统用户密码哈希 </td>
</tr>
<tr>
<td><code>--privileges</code></td>
<td>枚举数据库管理系统用户的权限 </td>
</tr>
<tr>
<td><code>--roles</code></td>
<td>枚举数据库管理系统用户的角色 </td>
</tr>
<tr>
<td><code>--dbs</code></td>
<td>枚举数据库管理系统数据库 </td>
</tr>
<tr>
<td><code>--tables</code></td>
<td>枚举的DBMS数据库中的表 </td>
</tr>
<tr>
<td><code>--columns</code></td>
<td>枚举DBMS数据库表列 </td>
</tr>
<tr>
<td><code>--dump</code></td>
<td>转储数据库管理系统的数据库中的表项 </td>
</tr>
<tr>
<td><code>--dump-all</code></td>
<td>转储所有的DBMS数据库表中的条目 </td>
</tr>
<tr>
<td><code>--search</code></td>
<td>搜索列（S），表（S）和/或数据库名称（S） </td>
</tr>
<tr>
<td><code>-D DB</code></td>
<td>要进行枚举的数据库名 </td>
</tr>
<tr>
<td><code>-T TBL</code></td>
<td>要进行枚举的数据库表 </td>
</tr>
<tr>
<td><code>-C COL</code></td>
<td>要进行枚举的数据库列 </td>
</tr>
<tr>
<td><code>-U USER</code></td>
<td>用来进行枚举的数据库用户 </td>
</tr>
<tr>
<td><code>--exclude-sysdbs</code></td>
<td>枚举表时排除系统数据库 </td>
</tr>
<tr>
<td><code>--start=LIMITSTART</code></td>
<td>第一个查询输出进入检索 </td>
</tr>
<tr>
<td><code>--stop=LIMITSTOP</code></td>
<td>最后查询的输出进入检索 </td>
</tr>
<tr>
<td><code>--first=FIRSTCHAR</code></td>
<td>第一个查询输出字的字符检索 </td>
</tr>
<tr>
<td><code>--last=LASTCHAR</code></td>
<td>最后查询的输出字字符检索 </td>
</tr>
<tr>
<td><code>--sql-query=QUERY</code></td>
<td>要执行的SQL语句 </td>
</tr>
<tr>
<td><code>--sql-shell</code></td>
<td>提示交互式SQL的shell </td>
</tr>
</tbody>
</table>
<h2 id="Brute_force（蛮力）">Brute force（蛮力）</h2><pre><code>这些选项可以被用来运行蛮力检查。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--common-tables</code></td>
<td>检查存在共同表</td>
</tr>
<tr>
<td><code>--common-columns</code></td>
<td>检查存在共同列</td>
</tr>
</tbody>
</table>
<p>  User-defined function injection（用户自定义函数注入）：</p>
<pre><code>这些选项可以用来创建用户自定义函数。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--udf-inject</code></td>
<td>注入用户自定义函数</td>
</tr>
<tr>
<td><code>--shared-lib=SHLIB</code></td>
<td>共享库的本地路径</td>
</tr>
</tbody>
</table>
<h2 id="File_system_access（访问文件系统）">File system access（访问文件系统）</h2><pre><code>这些选项可以被用来访问后端数据库管理系统的底层文件系统。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--file-read=RFILE</code></td>
<td>从后端的数据库管理系统文件系统读取文件</td>
</tr>
<tr>
<td><code>--file-write=WFILE</code></td>
<td>编辑后端的数据库管理系统文件系统上的本地文件</td>
</tr>
<tr>
<td><code>--file-dest=DFILE</code></td>
<td>后端的数据库管理系统写入文件的绝对路径</td>
</tr>
</tbody>
</table>
<h2 id="Operating_system_access（操作系统访问）">Operating system access（操作系统访问）</h2><pre><code>这些选项可以用于访问后端数据库管理系统的底层操作系统。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--os-cmd=OSCMD</code></td>
<td>执行操作系统命令 </td>
</tr>
<tr>
<td><code>--os-shell</code></td>
<td>交互式的操作系统的shell </td>
</tr>
<tr>
<td><code>--os-pwn</code></td>
<td>获取一个OOB shell，meterpreter或VNC </td>
</tr>
<tr>
<td><code>--os-smbrelay</code></td>
<td>一键获取一个OOB shell，meterpreter或VNC </td>
</tr>
<tr>
<td><code>--os-bof</code></td>
<td>存储过程缓冲区溢出利用 </td>
</tr>
<tr>
<td><code>--priv-esc</code></td>
<td>数据库进程用户权限提升 </td>
</tr>
<tr>
<td><code>--msf-path=MSFPATH</code></td>
<td>Metasploit Framework本地的安装路径 </td>
</tr>
<tr>
<td><code>--tmp-path=TMPPATH</code></td>
<td>远程临时文件目录的绝对路径 </td>
</tr>
</tbody>
</table>
<h2 id="Windows注册表访问">Windows注册表访问</h2><pre><code>这些选项可以被用来访问后端数据库管理系统Windows注册表。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--reg-read</code></td>
<td>读一个Windows注册表项值</td>
</tr>
<tr>
<td><code>--reg-add</code></td>
<td>写一个Windows注册表项值数据</td>
</tr>
<tr>
<td><code>--reg-del</code></td>
<td>删除Windows注册表键值</td>
</tr>
<tr>
<td><code>--reg-key=REGKEY</code></td>
<td>Windows注册表键</td>
</tr>
<tr>
<td><code>--reg-value=REGVAL</code></td>
<td>Windows注册表项值</td>
</tr>
<tr>
<td><code>--reg-data=REGDATA</code></td>
<td>Windows注册表键值数据</td>
</tr>
<tr>
<td><code>--reg-type=REGTYPE</code></td>
<td>Windows注册表项值类型</td>
</tr>
</tbody>
</table>
<h2 id="General（一般）">General（一般）</h2><pre><code>这些选项可以用来设置一些一般的工作参数。 
</code></pre><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-t TRAFFICFILE</code></td>
<td>记录所有HTTP流量到一个文本文件中 </td>
</tr>
<tr>
<td><code>-s SESSIONFILE</code></td>
<td>保存和恢复检索会话文件的所有数据 </td>
</tr>
<tr>
<td><code>--flush-session</code></td>
<td>刷新当前目标的会话文件 </td>
</tr>
<tr>
<td><code>--fresh-queries</code></td>
<td>忽略在会话文件中存储的查询结果 </td>
</tr>
<tr>
<td><code>--eta</code></td>
<td>显示每个输出的预计到达时间 </td>
</tr>
<tr>
<td><code>--update</code></td>
<td>更新SqlMap </td>
</tr>
<tr>
<td><code>--save</code></td>
<td>file保存选项到INI配置文件 </td>
</tr>
<tr>
<td><code>--batch</code></td>
<td>从不询问用户输入，使用所有默认配置。 </td>
</tr>
</tbody>
</table>
<h2 id="Miscellaneous（杂项）">Miscellaneous（杂项）</h2><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--beep</code></td>
<td>发现SQL注入时提醒</td>
</tr>
<tr>
<td><code>--check-payload</code></td>
<td>IDS对注入payloads的检测测试</td>
</tr>
<tr>
<td><code>--cleanup</code></td>
<td>SqlMap具体的UDF和表清理DBMS</td>
</tr>
<tr>
<td><code>--forms</code></td>
<td>对目标URL的解析和测试形式</td>
</tr>
<tr>
<td><code>--gpage=GOOGLEPAGE</code></td>
<td>从指定的页码使用谷歌dork结果</td>
</tr>
<tr>
<td><code>--page-rank</code></td>
<td>Google dork结果显示网页排名（PR）</td>
</tr>
<tr>
<td><code>--parse-errors</code></td>
<td>从响应页面解析数据库管理系统的错误消息</td>
</tr>
<tr>
<td><code>--replicate</code></td>
<td>复制转储的数据到一个sqlite3数据库</td>
</tr>
<tr>
<td><code>--tor</code></td>
<td>使用默认的Tor（Vidalia/ Privoxy/ Polipo）代理地址</td>
</tr>
<tr>
<td><code>--wizard</code></td>
<td>给初级用户的简单向导界面</td>
</tr>
</tbody>
</table>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/Git使用记录/" itemprop="url">
                Git使用记录
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-10T11:20:24+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/Git使用记录/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/Git使用记录/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="授权">授权</h2><p>生成密钥和公钥</p>
<pre><code>ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"yourmail@g.com"</span>
</code></pre><p>注：    </p>
<pre><code>ssh-keygen在git的安装目录的"bin"目录下。
windows下填写路径是填写绝对路径，公钥密钥放在git安装      
目录下的".ssh"文件夹中。例如D:<span class="command">\Git</span><span class="command">\.</span>ssh<span class="command">\id</span>_rsa     
此时会创建D:<span class="command">\Git</span><span class="command">\.</span>ssh文件夹并在其中生成名为id_rsa的一对密钥。
其中将公钥添加到github.com网站中就可以通过命令行对其进行各种操作。
</code></pre><h2 id="登录github-com添加远程仓库。">登录github.com添加远程仓库。</h2><p>使用免费的只能选择public模式，添加title和description。完成并记录git clone url（形如：git@github.com\username\projectname）</p>
<pre><code>git remote add origin git<span class="annotation">@github</span>.<span class="string">com:</span>fengge98\test.git
</code></pre><p>创建一个名为origin的远程库关联到账户fengge98下名为test.git的工程</p>
<pre><code><span class="label">git</span> <span class="keyword">push </span>-u origin master
</code></pre><p>第一次由于远程仓库没有内容使用-u参数，将当前分支master中commit后的内容推送到origin远程库，并将远程库master和当前master关联方便以后的推送和拉取</p>
<h2 id="本地编写代码">本地编写代码</h2><pre><code>git branch asdf
git checkout adsf       <span class="preprocessor">#创建名为asdf的分支 并切换到asd</span>
git checkout -b asdf    <span class="preprocessor">#创建名为asdf的分支 并切换到asd</span>
git <span class="keyword">add</span> test1.py
git <span class="keyword">add</span> test2.py
...
git commit -m <span class="string">"description"</span>
<span class="keyword">add</span>并commit                <span class="preprocessor">#其中description部分填写当前版本的改动 </span>
git checkout master      <span class="preprocessor">#切换到主分支</span>
git merge asdf           <span class="preprocessor">#将adsf提交的改动合并到master分支</span>
git <span class="keyword">push</span>                   <span class="preprocessor">#将当前版本代码推送到远程库</span>
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/反射型xss/" itemprop="url">
                反射型XSS(心伤的瘦子)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-10T10:47:07+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/XSS漏洞/" itemprop="url" rel="index">
                  <span itemprop="name">XSS漏洞</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/反射型xss/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/反射型xss/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="1-查看&lt;_/_&quot;等字符的过滤情况如果没有，直接X-">1.查看<code>&lt; / &quot;</code>等字符的过滤情况如果没有，直接X.</h2><p><a href="http://www.wooyun.org/bugs/wooyun-2010-015957" target="_blank" rel="external"> 什么都没过滤的入门情况</a></p>
<h2 id="2-考虑用&amp;#x的形式代替，如果没有过滤&amp;_#_理论上可以代替任意字符，但是一般都会将&amp;过滤为&amp;amp-">2.考虑用<code>&amp;#x</code>的形式代替，如果没有过滤<code>&amp; #</code> 理论上可以代替任意字符，但是一般都会将&amp;过滤为<code>&amp;amp</code>. </h2><p><a href="http://www.wooyun.org/bugs/wooyun-2010-015959" target="_blank" rel="external">输出在<code>&lt;script&gt;&lt;/script&gt;</code>之间的情况</a>//这里构造的代码没懂<br><a href="http://www.wooyun.org/bugs/wooyun-2010-015963" target="_blank" rel="external">输出在HTML属性里的情况</a></p>
<h2 id="3-gbXXXX系列的可以考虑使用宽字符%c0杀掉双引号，可能是因为过滤的正则写的有问题-">3.gbXXXX系列的可以考虑使用宽字符<code>%c0</code>杀掉双引号，可能是因为过滤的正则写的有问题.</h2><p><a href="http://www.wooyun.org/bugs/wooyun-2010-015969" target="_blank" rel="external">宽字节复仇记 [QQ邮箱基本通用]</a></p>
<h2 id="4-`location-href=”………”+”&amp;ss=aaaa\”+”&amp;from==1;function_from(){}//“+”&amp;param=”;">4.`location.href=”………”+”&amp;ss=aaaa\”+”&amp;from==1;function from(){}//“+”&amp;param=”;</h2><p>如上所示代码：<br>1用\来闭合双引号,//注视掉后面代码<br>2将=改为==提高优先级<br>3可是在解析时浏览器提示from未声明，浏览器会优先解析function XXX(){} 的JS函数，添加如上代码<br>4发现空格被过滤掉了用/**/代替空格 </p>
<h2 id="5-反斜线">5.反斜线</h2><p><a href="http://www.wooyun.org/bugs/wooyun-2010-015979" target="_blank" rel="external">反斜线复仇记</a></p>
<h2 id="6-换行符">6.换行符</h2><pre><code><span class="number">5</span>.输出出现在注释中使用换行符<span class="escape">`%</span><span class="number">0</span><span class="literal">a</span><span class="escape">` </span>来使之后的代码生效。\.
</code></pre><p><a href="http://www.wooyun.org/bugs/wooyun-2010-016003" target="_blank" rel="external">换行符复仇记</a></p>
<h2 id="7-前面知识的综合应用">7.前面知识的综合应用</h2><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//cgi</span>.data.tech.qq.com/<span class="keyword">index</span>.php?mod=search&amp;type=data&amp;site=digi&amp;libid=<span class="number">2</span>&amp;curpage=<span class="number">1</span>&amp;pagenum=<span class="number">30</span>&amp;filterattr=<span class="number">138</span>,<span class="number">138</span>|<span class="number">16</span>|<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">5</span>&amp;filtervalue=<span class="number">3500</span>-<span class="number">4000</span>,<span class="variable">%B4</span><span class="variable">%F3</span><span class="variable">%D3</span><span class="variable">%DA4000</span>|<span class="variable">%D0</span><span class="variable">%FD</span><span class="variable">%D7</span><span class="variable">%AA</span>|WCDMA,WCDMA,HSDPA,HSDPA&amp;tplname=centersearch.shtml&amp;orderby=aaaa<span class="variable">%c0</span><span class="variable">%5c</span><span class="variable">%0aalert</span>(<span class="number">1</span>);<span class="regexp">//</span></span><br></pre></td></tr></table></figure>
<p>目标参数orderby</p>
<pre><code><span class="number">1</span>.使用换行符<span class="escape">`%</span><span class="number">0</span><span class="literal">a</span><span class="escape">`使</span>JS代码生效
<span class="number">2</span>.使用反斜线<span class="escape">`%</span><span class="number">5</span>c<span class="escape">`解</span>决语法错误，但是发现\被过滤为\\
<span class="number">3</span>.使用宽字符<span class="escape">`%</span>c0<span class="escape">`杀</span>掉一个反斜线最终保留一个反斜线，成功构造如上代码
</code></pre><p>以上资料来自<a href="http://www.wooyun.org/whitehats/%E5%BF%83%E4%BC%A4%E7%9A%84%E7%98%A6%E5%AD%90" target="_blank" rel="external">心伤的瘦子</a>@<a href="http://www.wooyun.org" target="_blank" rel="external">乌云</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/07/mysql使用记录总结/" itemprop="url">
                MySql用户及字符集操作
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-07T17:47:50+08:00" content="2015-08-07">
            2015-08-07
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/杂七杂八/" itemprop="url" rel="index">
                  <span itemprop="name">杂七杂八</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/07/mysql使用记录总结/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/07/mysql使用记录总结/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>MySql中添加用户,新建数据库,用户授权,删除用户,修改密码(注意每行后边都跟个;表示一个命令语句结束):</p>
<h2 id="1-新建用户">1.新建用户</h2><p>登录MYSQL：</p>
<pre><code><span class="built_ins">cmd</span>&gt;mysql -u root -p
<span class="built_ins">cmd</span>&gt;密码
</code></pre><p>创建用户：</p>
<pre><code>mysql&gt; insert into mysql.user<span class="params">(Host,User,Password)</span> values<span class="params">(<span class="string">"localhost"</span>,<span class="string">"test"</span>,password<span class="params">(<span class="string">"1234"</span>)</span>)</span>;
</code></pre><p>这样就创建了一个名为：test 密码为：1234 的用户。<br>注意：此处的”localhost”，是指该用户只能在本地登录，不能在另外一台机器上远程登录。如果想远程登录的话，将”localhost”改为”%”，表示在任何一台电脑上都可以登录。也可以指定某台机器可以远程登录。<br>然后登录一下：</p>
<pre><code>mysql&gt;<span class="flow">exit</span>;
<span class="built_in">cmd</span>&gt;mysql -u test -p
<span class="built_in">cmd</span>&gt;输入密码
mysql&gt;登录成功
</code></pre><h2 id="2-为用户授权">2.为用户授权</h2><p>授权格式：</p>
<pre><code><span class="operator"><span class="keyword">grant</span> 权限 <span class="keyword">on</span> 数据库.* <span class="keyword">to</span> 用户名@登录主机 <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">"密码"</span>;</span>　
</code></pre><p>登录MYSQL（有ROOT权限），这里以ROOT身份登录：</p>
<pre><code><span class="built_ins">cmd</span>&gt;mysql -u root -p
<span class="built_ins">cmd</span>&gt;密码
</code></pre><p>首先为用户创建一个数据库(testDB)：</p>
<pre><code>mysql&gt;create database <span class="built_in">test</span>DB;
</code></pre><p>授权test用户拥有testDB数据库的所有权限（某个数据库的所有权限）：</p>
<pre><code>mysql&gt;grant all privileges <span class="function_start"><span class="keyword">on</span></span> testDB.* <span class="keyword">to</span> test@localhost identified <span class="keyword">by</span> '<span class="number">1234</span>';
mysql&gt;flush privileges;  刷新系统权限表
格式：grant 权限 <span class="function_start"><span class="keyword">on</span></span> 数据库.* <span class="keyword">to</span> 用户名@登录主机 identified <span class="keyword">by</span> <span class="string">"密码"</span>;　
</code></pre><p>如果想指定部分权限给一用户，可以这样来写:</p>
<pre><code>mysql&gt;grant <span class="keyword">select</span>,update <span class="keyword">on</span> testDB<span class="built_in">.</span>* <span class="keyword">to</span> test@localhost identified <span class="keyword">by</span> <span class="string">'1234'</span>;
</code></pre><p>　　mysql&gt;flush privileges; 刷新系统权限表</p>
<p>授权test用户拥有所有数据库的某些权限： </p>
<pre><code>mysql&gt;grant select,<span class="built_in">delete</span>,<span class="keyword">update</span>,create,<span class="keyword">drop</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> test@<span class="string">"%"</span> identified by <span class="string">"1234"</span>;
//test用户对所有数据库都有select,<span class="built_in">delete</span>,<span class="keyword">update</span>,create,<span class="keyword">drop</span> 权限。
//@<span class="string">"%"</span> 表示对所有非本地主机授权，不包括localhost。（localhost地址设为<span class="number">127.0</span>.<span class="number">0.1</span>，如果设为真实的本地地址，不知道是否可以，没有验证。）
</code></pre><p>//对localhost授权：加上一句</p>
<pre><code><span class="operator"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> testDB.* <span class="keyword">to</span> <span class="keyword">test</span>@localhost <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'1234'</span>;</span>即可。
</code></pre><h2 id="3-删除用户">3.删除用户</h2><pre><code>cmd&gt;mysql -u root -p
cmd&gt;密码
mysql&gt;Delete <span class="keyword">FROM</span> user <span class="keyword">Where</span> User=<span class="string">'test'</span> <span class="keyword">and</span> Host=<span class="string">'localhost'</span>;
mysql&gt;flush privileges;
mysql&gt;drop database testDB; <span class="comment">//删除用户的数据库</span>
</code></pre><p>删除账户及权限：</p>
<pre><code>&gt;drop user 用户名<span class="at_rule">@<span class="string">'%'</span>;</span>
&gt;drop user 用户名<span class="at_rule">@<span class="preprocessor"> localhost</span>;</span> 
</code></pre><h2 id="4-修改指定用户密码">4.修改指定用户密码</h2><pre><code>cmd&gt;mysql -u root -p
cmd&gt;密码
mysql&gt;<span class="keyword">update</span> mysql.user <span class="built_in">set</span> password=password('新密码') <span class="built_in">where</span> User=<span class="string">"test"</span> <span class="built_in">and</span> Host=<span class="string">"localhost"</span>;
mysql&gt;flush privileges;
</code></pre><h2 id="5-字符集相关操作">5.字符集相关操作</h2><p>mysql&gt;show database;<br>|<strong>查看所有数据库：</strong>show databases ;<br>|<strong>创建数据库：</strong>create database 数据库名；<br>|<strong>创建指定字符集数据库：</strong>    create database test2 default character set utf8<br>|<strong>查看指定数据库使用字符集：</strong>show create database 数据库名；<br>|<strong>删除数据库：</strong>drop database 数据库名;<br>|<strong>查看数据关于字符集的默认配置：</strong> show variables like ‘character%’;<br>|<strong>修改字符集的方法（结合上一句）：</strong></p>
<pre><code><span class="operator"><span class="keyword">SET</span> character_set_client = utf8 ;</span>
<span class="operator"><span class="keyword">SET</span> character_set_connection = utf8 ;</span> 
<span class="operator"><span class="keyword">SET</span> character_set_results = utf8 ;</span> 
<span class="operator"><span class="keyword">SET</span> character_set_server = utf8 ;</span> 
<span class="operator"><span class="keyword">SET</span> collation_connection = utf8 ;</span> 
<span class="operator"><span class="keyword">SET</span> collation_database = utf8 ;</span> 
<span class="operator"><span class="keyword">SET</span> collation_server = utf8 ;</span> 
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/07/密码找回漏洞总结/" itemprop="url">
                密码找回漏洞总结
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-07T16:58:06+08:00" content="2015-08-07">
            2015-08-07
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/逻辑漏洞/" itemprop="url" rel="index">
                  <span itemprop="name">逻辑漏洞</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/07/密码找回漏洞总结/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/07/密码找回漏洞总结/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h1 id="概述">概述</h1><pre><code>大部分是乌云知识库中的内容，已经总结的很好了，再按照自己的思路过一遍。
</code></pre><h2 id="1-伪造请求（未注册的情况下）">1.伪造请求（未注册的情况下）</h2><pre><code>在请求密码修改的过程中，修改账号的手机或邮箱等联系方式，在接受到验证码后进行密码修改。
</code></pre><p><a href="http://www.wooyun.org/bugs/wooyun-2013-020425" target="_blank" rel="external">OPPO修改任意帐号密码-2</a><br><a href="http://www.wooyun.org/bugs/wooyun-2013-020532" target="_blank" rel="external">OPPO修改任意帐号密码-3</a><br>修改了接受密码手机，并且通过对账户类型的修改绕过边界。</p>
<h2 id="2-使用正常账户请求修改获取token">2.使用正常账户请求修改获取token</h2><pre><code><span class="number">1.</span> 爆破（绕过次数验证）
</code></pre><p> <a href="http://www.wooyun.org/bugs/wooyun-2012-011833" target="_blank" rel="external">当当网任意用户密码修改漏洞</a><br> 原因：验证码过于简单，并且没有对请求修改次数做出限制。<br> <a href="http://www.wooyun.org/bugs/wooyun-2012-011720" target="_blank" rel="external">微信任意用户密码修改漏洞</a><br> 原因：虽然设置了请求阀值，但被猜解除了验证方式，病找到了绕过方式，验证码为4-5位的数字容易爆破</p>
<pre><code><span class="number">2.</span> 猜解
</code></pre><p> <a href="http://www.wooyun.org/bugs/wooyun-2012-08333" target="_blank" rel="external">奇虎360任意密码修改</a><br> 原因：使用了特定值的加密作为token，被猜解到使用了时间戳的MD5值。在实际过程中我们也可以尝试用户名，手机，邮箱，等等的不同加密方式。</p>
<pre><code><span class="number">3.</span> 在客户端寻找token信息
</code></pre><p> <a href="http://www.wooyun.org/bugs/wooyun-2012-05630" target="_blank" rel="external">走秀网秀团任意密码修改缺陷</a><br> 原因：没有严格控制token，在返回的url中发现token信息<br><a href="http://www.wooyun.org/bugs/wooyun-2012-04728" target="_blank" rel="external"> sohu邮箱任意用户密码重置</a><br>原因：找回密码问题的答案在页面源码中可以看到…… </p>
<h2 id="3-通过验证提交修改请求时存在的漏洞">3.通过验证提交修改请求时存在的漏洞</h2><pre><code>在请求过程中修改用户uid
</code></pre><p> <a href="http://www.wooyun.org/bugs/wooyun-2012-012572" target="_blank" rel="external">身份通任意密码修改-泄漏大量公民信息</a><br> <a href="http://www.wooyun.org/bugs/wooyun-2013-018263" target="_blank" rel="external">携程旅行网任意老板密码修改(庆在wooyun第100洞)</a><br> 原因：没有管理好token和用户间一对一的关系，导致在最后提交请求的过程中修改了uid导致任意用户密码重置。</p>
<h2 id="4-边界绕过特殊案例">4.边界绕过特殊案例</h2><p><a href="http://www.wooyun.org/bugs/wooyun-2012-08307" target="_blank" rel="external">网易邮箱可直接修改其用户密码</a><br>过程：注册过程的绑定手机页面用过参数修改，将任意账号绑定至可控手机，在通过密码找回流程找回</p>
<pre><code>以上资料均来自乌云知识库~
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&laquo;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://i3.tietuku.com/11f86a6e7f812e32.jpg" alt="FengGe" itemprop="image"/>
          <p class="site-author-name" itemprop="name">FengGe</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/fengge98" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2401245495/" target="_blank">weibo</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/" target="_blank">douban</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/" target="_blank">zhihu</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
              <a href="http://cjker.com/" target="_blank">稀客</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FengGe</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"fengge98"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
